<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
        span {
            display:none;
        }
		legend {color: #CC0033;
                font-weight: 600;
		}
        
        #precio {color: #222;
                font-weight: 600;
                line-height: 1.3;
                }
        
    </style>
 <script>
	function validar(){
		
     }
	 function cambiarColor (e){ 
	  e.style.background = "beige";
	 }

	 function validarNomApel (e){ 
		let re=/^[a-z]+$/i;
		if (re.test(e.value)){
			e.style.background="white";
			return true;
		}else{
			alert("tonto");
			e.value="";
			e.focus();
			return false;
		}
	 }
	 function validarFecha (e){ 
		let re=/^\d{4}\-(1[0,1,2]|0[1-9])\-([0,1,2]\d|3[01])$/g;	
		if (re.test(e.value)){
			e.style.background="white";
				if(e.id=="fecnac"){
					let fecha=new Date(e.value);
					calcularEdad(fecha);
				}else{
					let fecha=new Date(e.value);
					calcularRenovar(fecha);
				}
			return true;
		}else{
			alert("tonto");
			e.value="";
			e.focus();
			return false;
		}
	 }
	 function calcularEdad (e){ 
		let fechaActual=new Date();
		let fechaNacimiento=new Date(e);
		console.log(e);

		var añoActual=fechaActual.getFullYear();
        var mesActual=fechaActual.getMonth();
        var diaActual=fechaActual.getDate();


        var añoNacimiento=fechaNacimiento.getFullYear();
        var mesNacimiento=fechaNacimiento.getMonth();
        var diaNacimiento=fechaNacimiento.getDate();

        var años=añoActual-añoNacimiento;

        if(mesActual<mesNacimiento || (mesActual==mesNacimiento && diaActual<diaNacimiento)){
            años--;
		}
		if(años<18 | años>65){
			alert("tonto, edad no valida");
			fecnac.focus();
			fecnac.value="";
		}else{
		edad.value=años;
		return años;
		}


	}
	 function validarDNI (e){ 
		re=/^\d{6,8}[A-Z]$/g;

		if(re.test(e.value)){
			e.style.background="white";
			return true;
		}else{([0,1,2])
			alert("tonto");
			e.value="";
			e.focus();
			return false;
		}
	}
	 function calcularRenovar(e){ 
		
		let fechaActual=new Date();
		let fechaCarnet=new Date(e);
		while (fechaCarnet<fechaActual){
	
				fechaCarnet.setFullYear(fechaCarnet.getFullYear()+10);
				console.log(fechaCarnet);
			
		}
		console.log(fechaCarnet.getMonth());
		console.log(fechaCarnet.getDay());

		renovar.value=(fechaCarnet.getFullYear()+"-"+(fechaCarnet.getMonth()+1)+"-"+fechaCarnet.getDate());
		return true;
	
	}
     </script>
    </head>
 <body>
<h1>CLUB DEL AUTOMOVIL</h1>
<h3>ALTA NUEVO SOCIO</h3>
<form>
<div>
    <fieldset>
	<legend>DATOS SOCIO</legend>

	Nombre &nbsp;&nbsp;<input type="text" id="nom"size=30
     	onfocus="cambiarColor(this, 'beige')"
		onchange=" validarNomApel(this) ">
	<br><br>Apellidos <input type="text" id="ape"size=30
		onfocus="cambiarColor(this, 'beige')" 
		onchange=" validarNomApel(this) ">
	<br><br>Fecha Nacimiento  <input type="text" id=fecnac size=13 placeholder="aaaa-mm-dd"
		onfocus=" cambiarColor(this, 'beige')"
		onchange=" validarFecha(this)"
		>&nbsp;&nbsp; Edad <input type="text" size=4 id="edad" value="" readonly>
		 </fieldset>
	 <br>
	<fieldset>
    <legend>DATOS CARNET CONDUCIR </legend>
    Num Carnet <input type="text" id="carnet" size="15"
		onfocus=" cambiarColor(this, 'beige')"
		onchange=" validarDNI(this)"> &nbsp;&nbsp;
	Desde   <input type="text" size=13 id="desde" placeholder="aaaa-mm-dd"
		onfocus=" cambiarColor(this, 'beige')"
		onchange=" validarFecha(this)"> &nbsp;&nbsp;  
    Renovar   <input type="text"  size=13 id="renovar" readonly>  
	<input  type="button" value="CONTRATAR" onclick="validar()">  <br><br> 
 </div>
</form> 
<br>
<div id="todoOK"></div>
</body>
</html>
